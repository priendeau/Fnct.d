###
### FootPrint Added, see Prefixed-Var ZSEAddFootPrint from ZenityShellEval
###

###File:877d7e9a-1001-11e3-98a2-001b3875b29c
###UUID-TIME-MARKER:c71f67b2-105a-11e3-98a2-001b3875b29c
###Date: ${StrDateFormat}
###Sha1Sum: f0ca9d73b273e996472d5bc4910f05844fe5557e
### Size:4494
### NbWord: 391\n
unset FileNameConversion ;
function FileNameConversion()
{
   local __call_locality=( FNC FileNameConversion ) ;
   local ArrayArg=( $* ) ; 
   local Arg0=${ArrayArg[0]} ;
   local StrFileNameSearch=${FNCMimeTypeEntry:=tif} ;
   local StrFileNameReplace=${FNCMimeTypeConv:=pnm} ;
   local BoolRemoveFileExt=${FNCRemoveExt:=True} ;
   local StrTagList=${FNCTag:=__FILE__,__NEWFILE__,__ENTRY__,__CONV__} ;
   local StrTagAction=${FNCAppsConv:=mv __FILE__ __ENTRY__ __NEWFILE__ __CONV__} ;
   local StrPath=${FNCPath:=./} ;
   local BoolDisplayCmd=${FNCDisplayCmd:=False} ;
   local StrFileListPrint=${FNCFindPrintf:=%f } ;
   local StrFileListName=${FNCFindIname:=*\${StrFileNameSearch}} ;
   local StrFileListFunc=${FNCFLFunc:=_FileList} ;

  function __LoopAction()
 {
   local __call_locality=( _LA __LoopAction ) ;
   local ArrayArg=( $* ) ; 
   local Arg0=${ArrayArg[0]} ;
   local BoolRemoveFileExt=${_LAIsRemoveext:=True} ;
   eval $( BVTestVarName=StrItem \
         BVTestVarHold='${Item//${StrFileNameSearch}/}' \
         BVTestBoolVarName=\${BoolRemoveFileExt}
         BVTestBoolCase=False \
         BVTestBoolAssertion='${Item}' BVTestScopeTest=local BoolVarTestVarCreation ) ; 
   local StrCmdEval=${StrTagAction} ; 
   local ArrayTagList=( ${StrTagList//,/ } ) ; 
   local ArrayVarValue=( ${StrItem} ${StrItem} ${StrFileNameSearch} ${StrFileNameReplace} ) ;
   for (( intAx=0 ; intAx <= ${#ArrayTagList[@]}-1 ; intAx++ )) ; do
    local Tag=${ArrayTagList[${intAx}]} ;
    local Value=${ArrayVarValue[${intAx}]} ;
    StrCmdEval=${StrCmdEval//${Tag}/${Value}} ; 
   done
   eval $( BVTestVarName=StrCmdDisplay \
         BVTestVarHold='echo -ne "CmdEval: ${StrCmdEval}\n" > /dev/stderr ' \
         BVTestBoolVarName=\${BoolDisplayCmd}
         BVTestBoolCase=True \
         BVTestBoolAssertion='eval ${StrCmdEval}' BVTestScopeTest=local BoolVarTestVarCreation ) ; 
 }
 function _FileList()
 {
   local __call_locality=( _FL _FileList ) ;
   local ArrayArg=( $* ) ; 
   local Arg0=${ArrayArg[0]} ;
   local StrCmdEval='find ${StrPath} -type f -iname \"${StrFileListName}\" -printf \"${StrFileListPrint}\"' ;
   eval echo -ne "\n\n\tFind command: [${StrCmdEval}]\n\n" > /dev/stderr ; 
   local StrReturn=$( eval ${StrCmdEval} ) ; 
   echo -ne "${StrReturn}" ; 
 }

 function __main_StartServices()
 {
   local __call_locality=( Main __main_StartServices ) ;
   local ArrayArg=( $* ) ; 
   local Arg0=${ArrayArg[0]} ;
   #local StrEval='find ./ -type f -iname "*${StrFileNameSearch}" -printf "%f "' ; 
   local StrEval=$( eval StrPath=${StrPath} \
                             StrFileNameSearch=${StrFileNameSearch} \
                             StrFileListPrint=${StrFileListPrint} \
                             ${StrFileListFunc} ) ; 

   local ArrayFile=( $( eval ${StrEval} ) ) ;
   echo -ne "\n\tNbFile: ${#ArrayFile[@]}\n" > /dev/stderr  ; 
   for (( intx=0 ; intx <= ${#ArrayFile[@]}-1 ; intx++  )) ; do 
    local Item=${ArrayFile[${intx}]//.${StrFileNameSearch}/} ; 
    StrFileNameSearch=${StrFileNameSearch} \
    StrFileNameReplace=${StrFileNameReplace} \
    StrPath=${StrPath} Item=${Item} \
    BoolRemoveFileExt=${BoolRemoveFileExt} \
    StrTagAction=${StrTagAction} \
    StrTagList=${StrTagList} \
    StrNewFile=${StrNewFile} \
    BoolDisplayCmd=${BoolDisplayCmd} \
    StrFileListName=${StrFileListName} \
    StrFileListFunc=${StrFileListFunc} \
    __LoopAction ;
   done 
  
 }
 local StrSwitchMessages="Following switch are available:\n\n\t--startservices\tStart the application normally.\n\t--get\t\tReturn value of Internal Variable.\n\t--list\t\tList all Internal Pre-fixed Variable available to query or get.\n\n" ;
 if [ "${Arg0:=--startservices}" == "--help"	] ; then 
  GetVarReference ${__call_locality[1]} ; 
  echo -ne "${StrSwitchMessages}" > /dev/stderr ; 
 elif [ "${Arg0:=--startservices}" == "--get" ] ; then 
  eval """local ArgGet=\${${ArrayArg[1]}}""" ; 
  echo -ne """${ArgGet}\n""" ;
 elif [ "${Arg0:=--startservices}" == "--list" ] ; then 
  eval $( __GetVarReferenceList ) ;
 elif [ "${Arg0:=--startservices}" == "--startservices" ] ; then 
  StrFileNameSearch=${StrFileNameSearch} \
  StrFileNameReplace=${StrFileNameReplace} \
  StrPath=${StrPath} \
  BoolRemoveFileExt=${BoolRemoveFileExt} \
  StrTagAction=${StrTagAction} \
  StrTagList=${StrTagList} \
  StrNewFile=${StrNewFile} \
  BoolDisplayCmd=${BoolDisplayCmd} \
  __main_StartServices ; 
 fi
 
}

FNCPath=./ FNCMimeTypeEntry=tif FNCMimeTypeConv=pnm FileNameConversion
