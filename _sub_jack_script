
loop_jack_connection()
{
  ### Should Use Prefix-option LJC -> LoopJackConnection before calling the function if you want to change any
  ### options inside this function. 
  ###
  ###
  local __call_locality=( "loop_jack_connection" ) ;
  local ArrayArg=( $* ) ;
  function DisplayErrDev()
  {
   local __call_locality=( "DisplayErrDev" ) ;
   local ArrayArg=( $* ) ; 
   echo -ne "${ArrayArg[@]}\n" > /dev/stderr ;
  }
  local CmdLine=( jackd ${LJCDefaultHardwareOption:=""}  --port-max ${LJCNbOpenPort:=256} -d ${LJCAudioInterface:=alsa} --rate ${LJCRate:=44100} --period ${LJCPeriodLen:=1024} --nperiods ${LJCNbPeriods:=4} --inchannels ${LJCInputChannel:=2} --outchannels ${LJCOutputChannel:=2} --input-latency ${LJCInputLatency:=8} --output-latency ${LJCOutputLatency:=8} ${LJCDefaultOption:=--playback} --device ${LJCDevice:=default} ${LJCInterfaceOption:=""} ) ; 
  #eval $( __call_locality ) ;
  if [ ${LJCDefaultAction:="startserver"} != "help" ] ; then
    DisplayErrDev "Loop Jack Connection:\n\t Help Interface is available by typing following prefix command to the function:\nLLJCDefaultAction=help "    
  fi 
  local IntDefaultSleepTime=${LJCDefaultSleep:=2};
  if [ ${LJCDefaultAction:="startserver"} == "help" ] ; then
   DisplayErrDev "Loop Jack Connection:" 
   DisplayErrDev "\tPrefix Options:" 
   DisplayErrDev "\tLJCDefaultOption\t: Include jackd option:\n\t\t\t( --capture --playback --duplex )" 
   DisplayErrDev "\tLJCNbOpenPort\t\t: default set to 256                    ( --port-max 256   )" 
   DisplayErrDev "\tLJCAudioInterface\t: audio interface name, default is alsa ( -d               )" 
   DisplayErrDev "\tLJCRate\t\t\t: default is 44100                      ( --rate           )" 
   DisplayErrDev "\tLJCPeriodLen\t\t: default set to 1024                   ( --period         )" 
   DisplayErrDev "\tLJCNbPeriods\t\t: defaut set to 4                       ( --nperiods       )" 
   DisplayErrDev "\tLJCInputChannel\t\t: default set to 2                      ( --inchannels     )" 
   DisplayErrDev "\tLJCOutputChannel\t: default set to 2                      ( --outchannels    )" 
   DisplayErrDev "\tLJCInputLatency\t\t: default set to 8                      ( --input-latency  )" 
   DisplayErrDev "\tLJCOutputLatency\t: default set to 8                      ( --output-latency )" 
   DisplayErrDev "\tLJCDevice\t\t: default set to (default)                     ( --device )" 
   DisplayErrDev "Other JackOption Option\n" 
   DisplayErrDev "\tLJCHardwareOption\t: to add any other option not initialized." 
   DisplayErrDev "\tLJCInterfaceOption\t: to add any interface related options not used." 
   DisplayErrDev "Other Loop Jack Connection Semantic Action\n" 
   DisplayErrDev "\tLLJCDefaultAction\t: default is set to startserver ( startserver/help/test/jackoption )" 
   DisplayErrDev "\tLJCDefaultSleep\t: Internal sleep times, set to ${IntDefaultSleepTime} second(s)." 
  elif [ ${LJCDefaultAction:="startserver"} == "test" ] ; then
   DisplayErrDev "Following command line will be executed:\n\tCmd:[ ${CmdLine[@]} ]\n" ;
   DisplayErrDev "Waiting ${IntDefaultSleepTime} sec..."; 
   sleep ${IntDefaultSleepTime} ; 
   eval ${CmdLine[@]} ; 
  elif [ ${LJCDefaultAction:="startserver"} == "jackoption" ] ; then
   DisplayErrDev "Main Jackd Option:" 
   jackd --help
   DisplayErrDev "Main Jackd Option for Default Interface ( see help to see default Interface set ):"
   jackd -d ${LJCAudioInterface:=alsa} --help
  else
   while [ 1 ] ; do
     eval ${CmdLine[@]} 2>&1 /dev/null ;
     sleep ${IntDefaultSleepTime} ;
   done ;
  fi 
}

loop_jack_plumbing()
{
  eval $( __call_locality ) ;
  while [ 1 ] ; do
    jack.plumbing 2>&1 /dev/null ;
    sleep 5 ;
  done ;
}

jack_plumbing_handler()
{
  eval $( __call_locality ) ;
  if [ "${ArrayArg[0]:=ListDisplay}" == "ListDisplay" ] ; then
    #echo -ne "Adding Jack-Plumbing Interface to Zenity List\n" > /dev/stderr ;
    echo "TRUE" ;
    echo "Jack Plumbing Interface" ;
    echo "2" ;
  elif [ "${ArrayArg[0]:=ListDisplay}" == "start" ] ; then
    cd ${USER} ;
    loop_jack_plumbing ;
  fi
}

jack_daemon_handler()
{
  eval $( __call_locality ) ;
  if [ "${ArrayArg[0]:=ListDisplay}" == "ListDisplay" ] ; then
    #echo -ne "Adding Jack-Daemon Interface to Zenity List\n" > /dev/stderr ;
    echo "TRUE" ;
    echo "Jack Deamon" ;
    echo "1" ;
  elif [ "${ArrayArg[0]:=ListDisplay}" == "start" ] ; then
    while [ 1 ] ; do
      loop_jack_connection ;
    done
  fi
}

Zenity_Jack_Manager()
{
 eval $( __call_locality ) ;
 local ArrayHandler=( jack_daemon_handler jack_plumbing_handler ) ;
 local ArrayAction=( ListDisplay start ) ;
 local IntZenityListWidth=600 ;
 local IntZenityListHeight=200 ;
 local StrZenitySep="\"\n\"" ;
 local StrZenityTextHeader="\"Jack audio Service Manager\"" ;
 local StrZenityColumnName=( "\"Services To Start\"" "\"Services Name\" --column=\"Start Order\"" ) ;
 local ListInterfaceService=$( eval echo "zenity ${ZenityDefaultInterface[${IntZenityListInterface}]}" ) ;
 function ListDisplay()
 {
   eval $( __call_locality ) ;
   local StrFuncName=( ListDisplay ) ;
   local CmdEval=( ${ArrayArg[0]} ${ArrayArg[1]} ) ;
   echo -ne "From Function:${StrFuncName[0]}\n\tCmdLine:[ ${CmdEval[@]} ]\n" > /dev/stderr ;
   eval "${CmdEval[@]}" ;
 }
 function start()
 {
   eval $( __call_locality ) ;
   local StrFuncName=( start ) ;
   local CmdEval=( ${ArrayArg[0]} ${ArrayArg[1]} ) ;
   echo -ne "From Function:${StrFuncName[0]}\n\tCmdLine:[ ${CmdEval[@]} ]\n" > /dev/stderr ;
   eval "${CmdEval[@]}" ;
 }
 function Launch()
 {
   eval $( __in_for ArrayAction ${ArrayHandler[intArrayHandler]} ${ArrayArg[1]} ) ;
 }
 local StrCmd=$( eval $( __in_for ArrayHandler Launch ) | eval "${ListInterfaceService}" ) ;
 echo "StrCmd:[${StrCmd}]" ;
 #eval $( __in_for ArrayHandler LaunchAction ) | eval "${ListInterfaceService} ;
 #| eval "${ListInterfaceService}" ;

  #| eval "${ListInterfaceService}" ;
}


